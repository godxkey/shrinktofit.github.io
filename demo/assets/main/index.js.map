{"version":3,"sources":["../../file:/X:/Repos/Leslie/MyOwnSwordsMan/Client/assets/Source/Utils/Constants.ts","../../file:/X:/Repos/Leslie/MyOwnSwordsMan/Client/assets/Source/Utils/SoftSkin.ts","../../file:/X:/Repos/Leslie/MyOwnSwordsMan/Client/assets/Source/Utils/SkeletonRenderer.ts","../../file:/X:/Repos/Leslie/MyOwnSwordsMan/Client/assets/Source/Cameras/FirstPersonCamera.ts","../../file:/X:/Repos/Leslie/MyOwnSwordsMan/Client/assets/Source/Controller/Joystick.ts","../../file:/X:/Repos/Leslie/MyOwnSwordsMan/Client/assets/Source/Utils/NodeUtils.ts","../../file:/X:/Repos/Leslie/MyOwnSwordsMan/Client/assets/Source/Controller/MmoController.ts","../../file:/X:/Repos/Leslie/MyOwnSwordsMan/Client/assets/Source/Utils/MixamoAnimationRetargeting.ts","../../file:/X:/Repos/Leslie/MyOwnSwordsMan/Client/assets/Source/Cameras/ThirdPersonCamera.ts","../../file:/X:/Repos/Leslie/MyOwnSwordsMan/Client/assets/Source/Utils/GeometryUtils.ts","../../file:/X:/Repos/Leslie/MyOwnSwordsMan/Client/assets/Source/Utils/UIContentSizeOutline.ts","../../file:/X:/Repos/Leslie/MyOwnSwordsMan/Client/assets/Source/Utils/BillboardUi.ts","../../file:/X:/Repos/Leslie/MyOwnSwordsMan/Client/assets/Source/Utils/SkeletonUtils.ts","../../file:/X:/Repos/Leslie/MyOwnSwordsMan/Client/assets/Source/Utils/OctahedralBone.ts"],"names":["_RF","push","undefined","FORWARD","cc.math","Vec3","UNIT_Z","pop","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_temp","ccclass","_decorator","property","SoftSkin","Mesh","Node","Skeleton","Material","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","_initializerDefineProperty","_assertThisInitialized","_defineProperty","_createClass","key","value","start","_convertSkinnedMeshRenderer","update","_deltaTime","_iterator","_createForOfIteratorHelper","_skinners","_step","s","n","done","skinner","err","e","f","_ref","_this$renderParent","mesh","skeleton","skinningRoot","material","renderParent","node","iPrimitive","struct","primitives","primitive","positionElements","readAttribute","gfx","AttributeName","ATTR_POSITION","jointIndices","ATTR_JOINTS","weights","ATTR_WEIGHTS","normals","ATTR_NORMAL","nVertices","asserts","Number","isInteger","colors","colorArrayFromFlatted","fill","indices","readIndices","softRenderedPrimitive","utils","createMesh","primitiveMode","positions","from","displayNode","addChild","meshRenderer","addComponent","MeshRenderer","Skinner","vec3ArrayFromFlatted","renderingSubMeshes","Component","_applyDecoratedDescriptor","prototype","configurable","enumerable","writable","initializer","expr","assert","elements","result","iVec3","math","iColor","Color","vertexPositions","vertexNormals","vertexJoints","vertexWeights","renderResult","_this2","_nVertices","_vertexPositions","_vertexNormals","_vertexJoints","_vertexWeights","_jointMatrices","joints","map","Mat4","_inverseBindMatrices","inverseBindposes","_jointNodes","jointPath","iJoint","jointNode","getChildByPath","warn","set","_renderResult","_skinnedPositions","Float32Array","_skinnedNormals","vertexBundles","view","offset","byteLength","count","stride","attributes","Attribute","Format","RGB32F","meshStructure","PrimitiveMode","TRIANGLE_LIST","vertexBundelIndices","_","i","reset","data","Uint8Array","buffer","_updateJoints","_updateVertices","_updateRenderData","_this3","forEach","jointIndex","inverseBindMatrix","multiply","getWorldMatrix","sumMatrix","v3","skinnedPositions","skinnedNormals","jointMatrices","iVertex","zero","iInfluenceElement","influenceIndex","weight","jointMatrix","multiplyScalarAndAdd","skinnedPosition","transformMat4","toArray","skinnedNormal","transformMat4Normal","_iterator2","_step2","renderingSubMesh","_iterator3","_step3","attribute","name","vertexBuffer","vertexBuffers","stream","SkeletonRenderer","boneGeometry","createOctahedralBone","width","_boneMesh","setRootNodesFromSkeleton","_this$skeletonParent","skeletonParent","scene","rootJointNodes","skeletonToNodes","rootJointNode","_rootNodes","rootNode","_recursiveAddBoneRenderings","_rootNode","_watchJointTransformChangeEvent","_anyJointTransformChanged","_updateSkeletonRendering","on","EventType","TRANSFORM_CHANGED","_onAnyJointTransformChanged","_iterator4","children","_step4","child","_iterator5","_boneRenderings","_step5","boneRendering","_updateBone","parentJoint","_iterator6","_step6","_addBoneRendering","childJoint","renderingNode","boneMeshRenderer","fromPos","getWorldPosition","toPos","dir","subtract","dirLen","len","normalize","rot","Quat","rotationTo","UNIT_Y","setRTS","_dec7","_dec8","_dec9","_descriptor6","_descriptor7","_descriptor8","FirstPersonCamera","cc._decorator","cc.Node","_cc$Component","negate","left","right","middle","_distance","initialDistance","_zoom","_rotateHorizon","initialHorizonRotation","_rotateVertical","initialVerticalRotation","cc.systemEvent","cc.SystemEventType","MOUSE_DOWN","_onMouseDown","MOUSE_MOVE","_onMouseMove","MOUSE_UP","_onMouseUp","MOUSE_WHEEL","_onMouseWheel","TOUCH_START","_onTouchBegin","TOUCH_MOVE","_onTouchMove","TOUCH_END","_onTouchEnd","onDestroy","off","position","rotation","_calcTransform","target","worldPosition","targetPosition","outPosition","outRotation","_currentDir","fromViewUp","add","event","getButton","cc.EventMouse","BUTTON_LEFT","_mouseButtonPressing","BUTTON_RIGHT","BUTTON_MIDDLE","dx","getDeltaX","angle","horizonRotationSpeed","dy","getDeltaY","_angle","verticalRotationSpeed","deltaZoom","mouseWheelSpeed","getScrollY","_zoomDelta","touch","eventTouch","allTouches","getAllTouches","_allTouches","_slicedToArray","touch1","touch2","_previousTwoTouchDistance","Vec2","distance","getLocation","delta","getDelta","x","y","_angle2","_allTouches2","dDistance","touchZoomSpeed","multiplyScalar","currentLen","q","fromAxisAngle","toRadian","transformQuat","currentDirNorm","up","axis","cross","currentAngle","toDegree","DISABLE_FLIP_DELTA","clampedAngle","clamp","cc.Component","Joystick","get","_pressing","_direction","uiTransform","getComponent","cc.UITransform","cc.error","_uiTransform","bar","getChildByName","_bar","background","_background","_originalPositionBar","getPosition","_originalPositionBackground","_onThisNodeTouchStart","_onThisNodeTouchEnd","TOUCH_CANCEL","_onThisNodeTouchCancelled","_onThisNodeTouchMove","deltaTime","touchEvent","localPosition","convertToNodeSpaceAR","getUILocationX","getUILocationY","setPosition","backgroundPosition","delta2D","barPosition","_clampCircular","clampCircular","backgroundRadius","z","dir3D","console","log","centerX","centerY","radius","center","clampedDistance","scaleAndAdd","getForward","worldRotation","MmoController","w","a","d","KEY_DOWN","_onKeyDown","KEY_UP","_onKeyUp","joyStick","joystick","pressing","forward","currentDir","joyStickDir","direction","equals","ZERO","rotationSpeed","_position","_forward","newPosition","moveSpeed","rotationQuantity","_keyPressed","rotationDelta","_q","_rotation","NEG_UNIT_Z","UNIT_X","NEG_UNIT_X","keyName","keyCodeToKeyName","keyCode","NEG_UNIT_Y","_MAP","MAP","cc.macro","KEY","MixamoAnimationRetargeting","cc.AnimationClip","cc.Skeleton","animationComponent","cc.AnimationComponent","root","rootName","path","unshift","parent","prefix","join","mapping","SkeletonMapping","postfix","clips","clip","retargetAnimation","defaultClip","newSkeleton","retargetJoints","sourceSkeleton","targetSkeleton","getComponentsInChildren","cc.SkinnedMeshRenderer","skinnedMeshRenderer","retargetedSkeletonRenderNode","retargetedSkeletonRenderer","getComponentInChildren","skinRenderer","cc.Animation","sourceLocalBindPoses","getLocalBindPoses","sourceInverseBindPoses","bindposes","targetLocalBindPoses","targetInverseBindPoses","targetToSourceMapping","sourceJointPath","sourceJointIndex","mappedJointPath","targetJointIndex","indexOf","nonMappedTargetJoints","index","filter","split","newBindPoseMatrices","iTargetJoint","newBindPoseLocal","sourceLocalBindPose","sourceInverseBindPose","sourceLocalInverseBindPose","invert","targetLocalBindPose","targetLocalInverseBindPose","targetInverseBindPose","sourceLocalRotation","getRotation","sourceLocalScale","getScale","sourceLocalTranslation","getTranslation","targetLocalTranslation","slice","tracks","track","hierarchyPath","cc.animation","HierarchyPath","mapped","_prefix","_postfix","source","v2_1","v2_2","v3_1","qt_1","KEYCODE","W","charCodeAt","S","A","D","Q","E","SHIFT","macro","shift","ThirdPersonCamera","slide","range","onLoad","systemEvent","SystemEvent","onMouseWheel","onKeyDown","onKeyUp","onTouchStart","onTouchMove","onTouchEnd","copy","_euler","eulerAngles","dt","_velocity","_speedScale","lerp","damp","fromEuler","slerp","setRotation","v","moveSpeedShiftScale","game","canvas","requestPointerLock","t","getStartLocation","rotateSpeed","document","exitPointerLock","calculateNormals","p0","p1","p2","e1","e2","out","nFaces","iFace","i0","i1","i2","fromArray","UIContentSizeOutline","BillboardUi","cc.Camera","_lastTargetPosition","_updatePosition","lastTargetPosition","cc.Vec3","camera","uiPosition","convertToUINode","localBindPoses","nodes","scale","toRTS","rootNodes","parentJointIndex","getParentJoint","sourceJointsTransforms","bindPose","localBindPose","segments","parentJointPath","location","_ref$ratio","ratio","halfWeight","halfLength","upper","lower","transform","fromRTS","p","lowerApex","upperApex","v0","v1","v2","faceVertices","nFaceVertices","vertices","iFaceVertex","positionIndex"],"mappings":"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","file":"all.js","sourcesContent":["import { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"051ddCIZstMKJ9X/ysk0rOG\", \"Constants\", undefined);\n\nimport * as cc from 'cc';\nexport var FORWARD = cc.math.Vec3.UNIT_Z;\n\n_cclegacy._RF.pop();","import { createForOfIteratorHelper as _createForOfIteratorHelper } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { initializerDefineProperty as _initializerDefineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { classCallCheck as _classCallCheck } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createClass as _createClass } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { assertThisInitialized as _assertThisInitialized } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { inherits as _inherits } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createSuper as _createSuper } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { defineProperty as _defineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { applyDecoratedDescriptor as _applyDecoratedDescriptor } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { initializerWarningHelper as _initializerWarningHelper } from \"\\0rollupPluginModLoBabelHelpers.js\";\n\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _temp;\n\nimport { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"17b1an0hfFMKaWnTcK1MJgs\", \"SoftSkin\", undefined);\n\nimport { _decorator, Component, Node, Mesh, Skeleton, gfx, math, MeshRenderer, utils, assert, Material, warn } from 'cc';\nvar ccclass = _decorator.ccclass,\n    property = _decorator.property;\nexport var SoftSkin = (_dec = ccclass('SoftSkin'), _dec2 = property(Mesh), _dec3 = property(Node), _dec4 = property(Skeleton), _dec5 = property(Material), _dec6 = property(Node), _dec(_class = (_class2 = (_temp = /*#__PURE__*/function (_Component) {\n  _inherits(SoftSkin, _Component);\n\n  var _super = _createSuper(SoftSkin);\n\n  function SoftSkin() {\n    var _this;\n\n    _classCallCheck(this, SoftSkin);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"mesh\", _descriptor, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"skinningRoot\", _descriptor2, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"skeleton\", _descriptor3, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"material\", _descriptor4, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"renderParent\", _descriptor5, _assertThisInitialized(_this));\n\n    _defineProperty(_assertThisInitialized(_this), \"_skinners\", []);\n\n    return _this;\n  }\n\n  _createClass(SoftSkin, [{\n    key: \"start\",\n    value: function start() {\n      this._convertSkinnedMeshRenderer(this);\n    }\n  }, {\n    key: \"update\",\n    value: function update(_deltaTime) {\n      var _iterator = _createForOfIteratorHelper(this._skinners),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var skinner = _step.value;\n          skinner.update();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"_convertSkinnedMeshRenderer\",\n    value: function _convertSkinnedMeshRenderer(_ref) {\n      var _this$renderParent;\n\n      var mesh = _ref.mesh,\n          skeleton = _ref.skeleton,\n          skinningRoot = _ref.skinningRoot,\n          material = _ref.material;\n      var renderParent = (_this$renderParent = this.renderParent) !== null && _this$renderParent !== void 0 ? _this$renderParent : this.node;\n\n      for (var iPrimitive = 0; iPrimitive < mesh.struct.primitives.length; ++iPrimitive) {\n        var primitive = mesh.struct.primitives[iPrimitive];\n        var positionElements = mesh.readAttribute(iPrimitive, gfx.AttributeName.ATTR_POSITION);\n        var jointIndices = mesh.readAttribute(iPrimitive, gfx.AttributeName.ATTR_JOINTS);\n        var weights = mesh.readAttribute(iPrimitive, gfx.AttributeName.ATTR_WEIGHTS);\n\n        if (!positionElements || !jointIndices || !weights) {\n          continue;\n        }\n\n        var normals = mesh.readAttribute(iPrimitive, gfx.AttributeName.ATTR_NORMAL);\n        var nVertices = positionElements.length / 3;\n        asserts(Number.isInteger(nVertices));\n        asserts(nVertices * 3 === positionElements.length);\n        asserts(nVertices * 4 === jointIndices.length);\n        asserts(nVertices * 4 === weights.length);\n\n        if (normals) {\n          asserts(nVertices * 3 === normals.length);\n        }\n\n        var colors = colorArrayFromFlatted(new Array(4 * nVertices).fill(255.0));\n        var indices = mesh.readIndices(iPrimitive);\n        var softRenderedPrimitive = utils.createMesh({\n          primitiveMode: primitive.primitiveMode,\n          positions: Array.from(positionElements),\n          indices: indices ? Array.from(indices) : undefined // normals: normals ? Array.from(normals) : undefined,\n          // colors: flatColorArray(colors),\n\n        });\n        var displayNode = new Node();\n        renderParent.addChild(displayNode);\n        var meshRenderer = displayNode.addComponent(MeshRenderer);\n        meshRenderer.mesh = softRenderedPrimitive;\n\n        if (material) {\n          meshRenderer.material = material;\n        }\n\n        var skinner = new Skinner(nVertices, vec3ArrayFromFlatted(positionElements), normals ? vec3ArrayFromFlatted(normals) : undefined, jointIndices, weights, skeleton, skinningRoot, softRenderedPrimitive.renderingSubMeshes);\n\n        this._skinners.push(skinner);\n      }\n    }\n  }]);\n\n  return SoftSkin;\n}(Component), _temp), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"mesh\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"skinningRoot\", [_dec3], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, \"skeleton\", [_dec4], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, \"material\", [_dec5], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor5 = _applyDecoratedDescriptor(_class2.prototype, \"renderParent\", [_dec6], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n})), _class2)) || _class);\n\nfunction asserts(expr) {\n  assert(expr);\n}\n\nfunction flatVec3Array(array) {\n  var flatted = new Array(3 * array.length);\n\n  for (var iVec3 = 0; iVec3 < array.length; ++iVec3) {\n    var skinnedPosition = array[iVec3];\n    flatted[3 * iVec3 + 0] = skinnedPosition.x;\n    flatted[3 * iVec3 + 1] = skinnedPosition.y;\n    flatted[3 * iVec3 + 2] = skinnedPosition.z;\n  }\n\n  return flatted;\n}\n\nfunction vec3ArrayFromFlatted(elements) {\n  var result = new Array(elements.length / 3);\n\n  for (var iVec3 = 0; iVec3 < result.length; ++iVec3) {\n    result[iVec3] = new math.Vec3(elements[3 * iVec3 + 0], elements[3 * iVec3 + 1], elements[3 * iVec3 + 2]);\n  }\n\n  return result;\n}\n\nfunction colorArrayFromFlatted(elements) {\n  var result = new Array(elements.length / 4);\n\n  for (var iColor = 0; iColor < result.length; ++iColor) {\n    result[iColor] = new math.Color(elements[4 * iColor + 0], elements[4 * iColor + 1], elements[4 * iColor + 2], elements[4 * iColor + 3]);\n  }\n\n  return result;\n}\n\nfunction flatColorArray(array) {\n  var flatted = new Array(4 * array.length);\n\n  for (var iColor = 0; iColor < array.length; ++iColor) {\n    var color = array[iColor];\n    flatted[4 * iColor + 0] = color.r / 255.0;\n    flatted[4 * iColor + 1] = color.g / 255.0;\n    flatted[4 * iColor + 2] = color.b / 255.0;\n    flatted[4 * iColor + 2] = color.a / 255.0;\n  }\n\n  return flatted;\n}\n\nvar Skinner = /*#__PURE__*/function () {\n  function Skinner(nVertices, vertexPositions, vertexNormals, vertexJoints, vertexWeights, skeleton, skinningRoot, renderResult) {\n    var _this2 = this;\n\n    _classCallCheck(this, Skinner);\n\n    _defineProperty(this, \"_nVertices\", void 0);\n\n    _defineProperty(this, \"_vertexPositions\", void 0);\n\n    _defineProperty(this, \"_vertexNormals\", void 0);\n\n    _defineProperty(this, \"_vertexWeights\", void 0);\n\n    _defineProperty(this, \"_vertexJoints\", void 0);\n\n    _defineProperty(this, \"_skinnedPositions\", void 0);\n\n    _defineProperty(this, \"_skinnedNormals\", void 0);\n\n    _defineProperty(this, \"_inverseBindMatrices\", void 0);\n\n    _defineProperty(this, \"_jointNodes\", void 0);\n\n    _defineProperty(this, \"_jointMatrices\", void 0);\n\n    _defineProperty(this, \"_renderResult\", void 0);\n\n    this._nVertices = nVertices;\n    this._vertexPositions = vertexPositions;\n    this._vertexNormals = vertexNormals;\n    ;\n    this._vertexJoints = vertexJoints;\n    this._vertexWeights = vertexWeights;\n    this._jointMatrices = skeleton.joints.map(function () {\n      return new math.Mat4();\n    });\n    this._inverseBindMatrices = skeleton.inverseBindposes;\n    this._jointNodes = skeleton.joints.map(function (jointPath, iJoint) {\n      var jointNode = skinningRoot.getChildByPath(jointPath);\n\n      if (jointNode) {\n        return jointNode;\n      } else {\n        warn(\"Cannot find joint: \".concat(jointPath));\n\n        _this2._jointMatrices[iJoint].set(skeleton.inverseBindposes[iJoint]);\n\n        return null;\n      }\n    });\n    this._renderResult = renderResult;\n    this._skinnedPositions = new Float32Array(3 * nVertices);\n    this._skinnedNormals = new Float32Array(3 * nVertices);\n    var vertexBundles = [{\n      view: {\n        offset: 0,\n        length: this._skinnedPositions.byteLength,\n        count: nVertices,\n        stride: 3 * this._skinnedPositions.byteLength\n      },\n      attributes: [new gfx.Attribute(gfx.AttributeName.ATTR_POSITION, gfx.Format.RGB32F, false, 0, false, 0)]\n    }];\n    var meshStructure = {\n      vertexBundles: vertexBundles,\n      primitives: [{\n        primitiveMode: gfx.PrimitiveMode.TRIANGLE_LIST,\n        vertexBundelIndices: new Array(vertexBundles.length).fill(0).map(function (_, i) {\n          return i;\n        })\n      }]\n    };\n    var mesh = new Mesh();\n    mesh.reset({\n      struct: meshStructure,\n      data: new Uint8Array(this._skinnedPositions.buffer)\n    });\n  }\n\n  _createClass(Skinner, [{\n    key: \"update\",\n    value: function update() {\n      this._updateJoints();\n\n      this._updateVertices();\n\n      this._updateRenderData();\n    }\n  }, {\n    key: \"_updateJoints\",\n    value: function _updateJoints() {\n      var _this3 = this;\n\n      this._jointNodes.forEach(function (jointNode, jointIndex) {\n        var inverseBindMatrix = _this3._inverseBindMatrices[jointIndex];\n\n        if (jointNode) {\n          math.Mat4.multiply(_this3._jointMatrices[jointIndex], jointNode.getWorldMatrix(), inverseBindMatrix);\n        }\n      });\n    }\n  }, {\n    key: \"_updateVertices\",\n    value: function _updateVertices() {\n      var sumMatrix = new math.Mat4();\n      var v3 = new math.Vec3();\n      var nVertices = this._nVertices,\n          weights = this._vertexWeights,\n          jointIndices = this._vertexJoints,\n          skinnedPositions = this._skinnedPositions,\n          skinnedNormals = this._skinnedNormals,\n          jointMatrices = this._jointMatrices,\n          vertexPositions = this._vertexPositions,\n          vertexNormals = this._vertexNormals;\n\n      for (var iVertex = 0; iVertex < nVertices; ++iVertex) {\n        sumMatrix.zero();\n\n        for (var iInfluenceElement = 0; iInfluenceElement < 4; ++iInfluenceElement) {\n          var influenceIndex = 4 * iVertex + iInfluenceElement;\n          var weight = weights[influenceIndex];\n\n          if (!weight) {\n            continue;\n          }\n\n          var jointIndex = jointIndices[influenceIndex];\n          var jointMatrix = jointMatrices[jointIndex];\n          math.Mat4.multiplyScalarAndAdd(sumMatrix, sumMatrix, jointMatrix, weight);\n        }\n\n        v3.set(vertexPositions[iVertex]);\n        var skinnedPosition = v3;\n        math.Vec3.transformMat4(skinnedPosition, skinnedPosition, sumMatrix);\n        math.Vec3.toArray(skinnedPositions, skinnedPosition, 3 * iVertex);\n\n        if (vertexNormals) {\n          v3.set(vertexNormals[iVertex]);\n          var skinnedNormal = v3;\n          math.Vec3.transformMat4Normal(skinnedNormal, skinnedNormal, sumMatrix);\n          math.Vec3.toArray(skinnedNormals, skinnedPosition, 3 * iVertex);\n        }\n      }\n    }\n  }, {\n    key: \"_updateRenderData\",\n    value: function _updateRenderData() {\n      var renderResult = this._renderResult;\n\n      var _iterator2 = _createForOfIteratorHelper(renderResult),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var renderingSubMesh = _step2.value;\n\n          var _iterator3 = _createForOfIteratorHelper(renderingSubMesh.attributes),\n              _step3;\n\n          try {\n            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n              var attribute = _step3.value;\n\n              switch (attribute.name) {\n                case gfx.AttributeName.ATTR_POSITION:\n                  {\n                    var vertexBuffer = renderingSubMesh.vertexBuffers[attribute.stream];\n                    vertexBuffer.update(this._skinnedPositions);\n                    break;\n                  }\n\n                case gfx.AttributeName.ATTR_NORMAL:\n                  break;\n              }\n            }\n          } catch (err) {\n            _iterator3.e(err);\n          } finally {\n            _iterator3.f();\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  }]);\n\n  return Skinner;\n}();\n\n_cclegacy._RF.pop();","import { createForOfIteratorHelper as _createForOfIteratorHelper } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { initializerDefineProperty as _initializerDefineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { classCallCheck as _classCallCheck } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createClass as _createClass } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { assertThisInitialized as _assertThisInitialized } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { inherits as _inherits } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createSuper as _createSuper } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { defineProperty as _defineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { applyDecoratedDescriptor as _applyDecoratedDescriptor } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { initializerWarningHelper as _initializerWarningHelper } from \"\\0rollupPluginModLoBabelHelpers.js\";\n\nvar _dec, _dec2, _dec3, _dec4, _class, _class2, _descriptor, _descriptor2, _descriptor3, _temp;\n\nimport { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"1c60abAe1pIeps58uwH6z+e\", \"SkeletonRenderer\", undefined);\n\nimport { Component, Material, MeshRenderer, Node, Quat, Skeleton, utils, Vec3, _decorator } from \"cc\";\nimport { createOctahedralBone } from \"./OctahedralBone\";\nimport { skeletonToNodes } from \"./SkeletonUtils\";\nexport var SkeletonRenderer = (_dec = _decorator.ccclass, _dec2 = _decorator.property(Material), _dec3 = _decorator.property(Skeleton), _dec4 = _decorator.property(Node), _dec(_class = (_class2 = (_temp = /*#__PURE__*/function (_Component) {\n  _inherits(SkeletonRenderer, _Component);\n\n  var _super = _createSuper(SkeletonRenderer);\n\n  function SkeletonRenderer() {\n    var _this;\n\n    _classCallCheck(this, SkeletonRenderer);\n\n    _this = _super.call(this);\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"material\", _descriptor, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"skeleton\", _descriptor2, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"skeletonParent\", _descriptor3, _assertThisInitialized(_this));\n\n    _defineProperty(_assertThisInitialized(_this), \"_anyJointTransformChanged\", true);\n\n    _defineProperty(_assertThisInitialized(_this), \"_boneRenderings\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"_boneMesh\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_rootNodes\", []);\n\n    var boneGeometry = createOctahedralBone({\n      width: 0.1,\n      length: 0.1\n    });\n    _this._boneMesh = utils.createMesh(boneGeometry);\n    return _this;\n  }\n\n  _createClass(SkeletonRenderer, [{\n    key: \"setRootNodesFromSkeleton\",\n    value: function setRootNodesFromSkeleton(skeleton) {\n      var _this$skeletonParent;\n\n      var skeletonParent = (_this$skeletonParent = this.skeletonParent) !== null && _this$skeletonParent !== void 0 ? _this$skeletonParent : this.node.scene;\n      var rootJointNodes = skeletonToNodes(skeleton);\n\n      var _iterator = _createForOfIteratorHelper(rootJointNodes),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var rootJointNode = _step.value;\n          skeletonParent.addChild(rootJointNode);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      this._rootNodes = rootJointNodes;\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      if (this.skeleton) {\n        this.setRootNodesFromSkeleton(this.skeleton);\n      }\n\n      var rootJointNodes = this._rootNodes;\n\n      var _iterator2 = _createForOfIteratorHelper(rootJointNodes),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var rootNode = _step2.value;\n\n          this._recursiveAddBoneRenderings(rootNode);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      var _iterator3 = _createForOfIteratorHelper(rootJointNodes),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _rootNode = _step3.value;\n\n          this._watchJointTransformChangeEvent(_rootNode);\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      if (this._anyJointTransformChanged) {\n        this._anyJointTransformChanged = false;\n\n        this._updateSkeletonRendering();\n      }\n    }\n  }, {\n    key: \"_watchJointTransformChangeEvent\",\n    value: function _watchJointTransformChangeEvent(node) {\n      node.on(Node.EventType.TRANSFORM_CHANGED, this._onAnyJointTransformChanged, this);\n\n      var _iterator4 = _createForOfIteratorHelper(node.children),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var child = _step4.value;\n\n          this._watchJointTransformChangeEvent(child);\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n    }\n  }, {\n    key: \"_onAnyJointTransformChanged\",\n    value: function _onAnyJointTransformChanged() {\n      this._anyJointTransformChanged = true;\n    }\n  }, {\n    key: \"_updateSkeletonRendering\",\n    value: function _updateSkeletonRendering() {\n      var _iterator5 = _createForOfIteratorHelper(this._boneRenderings),\n          _step5;\n\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var boneRendering = _step5.value;\n\n          this._updateBone(boneRendering);\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n    }\n  }, {\n    key: \"_recursiveAddBoneRenderings\",\n    value: function _recursiveAddBoneRenderings(parentJoint) {\n      var _iterator6 = _createForOfIteratorHelper(parentJoint.children),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var child = _step6.value;\n\n          this._addBoneRendering(parentJoint, child);\n\n          this._recursiveAddBoneRenderings(child);\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n    }\n  }, {\n    key: \"_addBoneRendering\",\n    value: function _addBoneRendering(parentJoint, childJoint) {\n      var renderingNode = new Node();\n      renderingNode.name = \"\".concat(parentJoint.name, \"-\").concat(childJoint.name);\n      this.node.addChild(renderingNode);\n      var boneMeshRenderer = renderingNode.addComponent(MeshRenderer);\n      boneMeshRenderer.material = this.material;\n      boneMeshRenderer.mesh = this._boneMesh;\n      var boneRendering = {\n        parentJoint: parentJoint,\n        childJoint: childJoint,\n        renderingNode: renderingNode\n      };\n\n      this._boneRenderings.push(boneRendering);\n    }\n  }, {\n    key: \"_updateBone\",\n    value: function _updateBone(boneRendering) {\n      var parentJoint = boneRendering.parentJoint,\n          childJoint = boneRendering.childJoint;\n      var fromPos = parentJoint.getWorldPosition();\n      var toPos = childJoint.getWorldPosition();\n      var dir = Vec3.subtract(new Vec3(), toPos, fromPos);\n      var dirLen = Vec3.len(dir);\n      Vec3.normalize(dir, dir);\n      var rot = Quat.rotationTo(new Quat(), Vec3.UNIT_Y, dir);\n      boneRendering.renderingNode.setRTS(rot, fromPos, new Vec3(dirLen, dirLen, dirLen));\n    }\n  }]);\n\n  return SkeletonRenderer;\n}(Component), _temp), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"material\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"skeleton\", [_dec3], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, \"skeletonParent\", [_dec4], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n})), _class2)) || _class);\n\n_cclegacy._RF.pop();","import { slicedToArray as _slicedToArray } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { initializerDefineProperty as _initializerDefineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { classCallCheck as _classCallCheck } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createClass as _createClass } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { assertThisInitialized as _assertThisInitialized } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { inherits as _inherits } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createSuper as _createSuper } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { defineProperty as _defineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { applyDecoratedDescriptor as _applyDecoratedDescriptor } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { initializerWarningHelper as _initializerWarningHelper } from \"\\0rollupPluginModLoBabelHelpers.js\";\n\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _dec9, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6, _descriptor7, _descriptor8, _temp;\n\nimport { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"4611ad+FVZACpT24ZEFwUrf\", \"FirstPersonCamera\", undefined);\n\n// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\nimport * as cc from 'cc';\nexport var FirstPersonCamera = (_dec = cc._decorator.ccclass('FirstPersonCamera'), _dec2 = cc._decorator.property, _dec3 = cc._decorator.property, _dec4 = cc._decorator.property, _dec5 = cc._decorator.property, _dec6 = cc._decorator.property, _dec7 = cc._decorator.property, _dec8 = cc._decorator.property, _dec9 = cc._decorator.property(cc.Node), _dec(_class = (_class2 = (_temp = /*#__PURE__*/function (_cc$Component) {\n  _inherits(FirstPersonCamera, _cc$Component);\n\n  var _super = _createSuper(FirstPersonCamera);\n\n  function FirstPersonCamera() {\n    var _this;\n\n    _classCallCheck(this, FirstPersonCamera);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"initialDistance\", _descriptor, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"initialHorizonRotation\", _descriptor2, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"initialVerticalRotation\", _descriptor3, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"horizonRotationSpeed\", _descriptor4, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"verticalRotationSpeed\", _descriptor5, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"mouseWheelSpeed\", _descriptor6, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"touchZoomSpeed\", _descriptor7, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"target\", _descriptor8, _assertThisInitialized(_this));\n\n    _defineProperty(_assertThisInitialized(_this), \"_currentDir\", cc.math.Vec3.negate(new cc.math.Vec3(), cc.math.Vec3.UNIT_Z));\n\n    _defineProperty(_assertThisInitialized(_this), \"_distance\", 0.0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_mouseButtonPressing\", {\n      left: false,\n      right: false,\n      middle: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_previousTwoTouchDistance\", 0.0);\n\n    return _this;\n  }\n\n  _createClass(FirstPersonCamera, [{\n    key: \"start\",\n    value: function start() {\n      this._distance = this.initialDistance;\n\n      this._zoom(this._distance);\n\n      this._rotateHorizon(this.initialHorizonRotation);\n\n      this._rotateVertical(this.initialVerticalRotation);\n\n      cc.systemEvent.on(cc.SystemEventType.MOUSE_DOWN, this._onMouseDown, this);\n      cc.systemEvent.on(cc.SystemEventType.MOUSE_MOVE, this._onMouseMove, this);\n      cc.systemEvent.on(cc.SystemEventType.MOUSE_UP, this._onMouseUp, this);\n      cc.systemEvent.on(cc.SystemEventType.MOUSE_WHEEL, this._onMouseWheel, this);\n      cc.systemEvent.on(cc.SystemEventType.TOUCH_START, this._onTouchBegin, this);\n      cc.systemEvent.on(cc.SystemEventType.TOUCH_MOVE, this._onTouchMove, this);\n      cc.systemEvent.on(cc.SystemEventType.TOUCH_END, this._onTouchEnd, this);\n    }\n  }, {\n    key: \"onDestroy\",\n    value: function onDestroy() {\n      cc.systemEvent.off(cc.SystemEventType.MOUSE_DOWN, this._onMouseDown, this);\n      cc.systemEvent.off(cc.SystemEventType.MOUSE_MOVE, this._onMouseMove, this);\n      cc.systemEvent.off(cc.SystemEventType.MOUSE_UP, this._onMouseUp, this);\n      cc.systemEvent.off(cc.SystemEventType.MOUSE_WHEEL, this._onMouseWheel, this);\n    }\n  }, {\n    key: \"update\",\n    value: function update(_deltaTime) {\n      var position = new cc.math.Vec3();\n      var rotation = new cc.math.Quat();\n\n      this._calcTransform(this.target.worldPosition, position, rotation);\n\n      this.node.position = position;\n      this.node.rotation = rotation;\n    }\n  }, {\n    key: \"_calcTransform\",\n    value: function _calcTransform(targetPosition, outPosition, outRotation) {\n      var dir = cc.math.Vec3.normalize(new cc.math.Vec3(), this._currentDir);\n      cc.math.Quat.fromViewUp(outRotation, dir, cc.math.Vec3.UNIT_Y);\n      cc.math.Vec3.add(outPosition, targetPosition, this._currentDir);\n    }\n  }, {\n    key: \"_onMouseDown\",\n    value: function _onMouseDown(event) {\n      switch (event.getButton()) {\n        default:\n          break;\n\n        case cc.EventMouse.BUTTON_LEFT:\n          this._mouseButtonPressing.left = true;\n          break;\n\n        case cc.EventMouse.BUTTON_RIGHT:\n          this._mouseButtonPressing.right = true;\n          break;\n\n        case cc.EventMouse.BUTTON_MIDDLE:\n          this._mouseButtonPressing.middle = true;\n          break;\n      }\n    }\n  }, {\n    key: \"_onMouseMove\",\n    value: function _onMouseMove(event) {\n      if (this._mouseButtonPressing.right) {\n        var dx = event.getDeltaX();\n\n        if (dx) {\n          var angle = -dx * this.horizonRotationSpeed;\n\n          this._rotateHorizon(angle);\n        }\n\n        var dy = event.getDeltaY();\n\n        if (dy) {\n          var _angle = -dy * this.verticalRotationSpeed;\n\n          this._rotateVertical(_angle);\n        }\n      }\n    }\n  }, {\n    key: \"_onMouseUp\",\n    value: function _onMouseUp(event) {\n      switch (event.getButton()) {\n        default:\n          break;\n\n        case cc.EventMouse.BUTTON_LEFT:\n          this._mouseButtonPressing.left = false;\n          break;\n\n        case cc.EventMouse.BUTTON_RIGHT:\n          this._mouseButtonPressing.right = false;\n          break;\n\n        case cc.EventMouse.BUTTON_MIDDLE:\n          this._mouseButtonPressing.middle = false;\n          break;\n      }\n    }\n  }, {\n    key: \"_onMouseWheel\",\n    value: function _onMouseWheel(event) {\n      var deltaZoom = -this.mouseWheelSpeed * event.getScrollY();\n\n      this._zoomDelta(deltaZoom);\n    }\n  }, {\n    key: \"_onTouchBegin\",\n    value: function _onTouchBegin(touch, eventTouch) {\n      var allTouches = eventTouch.getAllTouches();\n\n      switch (allTouches.length) {\n        default:\n          break;\n\n        case 2:\n          {\n            var _allTouches = _slicedToArray(allTouches, 2),\n                touch1 = _allTouches[0],\n                touch2 = _allTouches[1];\n\n            this._previousTwoTouchDistance = cc.math.Vec2.distance(touch1.getLocation(), touch2.getLocation());\n            break;\n          }\n      }\n    }\n  }, {\n    key: \"_onTouchMove\",\n    value: function _onTouchMove(touch, eventTouch) {\n      var allTouches = eventTouch.getAllTouches();\n\n      switch (allTouches.length) {\n        default:\n          break;\n\n        case 1:\n          {\n            var delta = touch.getDelta();\n            var dx = delta.x;\n\n            if (dx) {\n              var angle = -dx * this.horizonRotationSpeed;\n\n              this._rotateHorizon(angle);\n            }\n\n            var dy = delta.y;\n\n            if (dy) {\n              var _angle2 = -dy * this.verticalRotationSpeed;\n\n              this._rotateVertical(_angle2);\n            }\n\n            break;\n          }\n\n        case 2:\n          {\n            var _allTouches2 = _slicedToArray(allTouches, 2),\n                touch1 = _allTouches2[0],\n                touch2 = _allTouches2[1];\n\n            var distance = cc.math.Vec2.distance(touch1.getLocation(), touch2.getLocation());\n            var dDistance = distance - this._previousTwoTouchDistance;\n            this._previousTwoTouchDistance = distance;\n\n            if (dDistance !== 0) {\n              var deltaZoom = -this.touchZoomSpeed * dDistance;\n\n              this._zoomDelta(deltaZoom);\n            }\n\n            break;\n          }\n      }\n    }\n  }, {\n    key: \"_onTouchEnd\",\n    value: function _onTouchEnd(touch) {}\n  }, {\n    key: \"_zoom\",\n    value: function _zoom(distance) {\n      cc.math.Vec3.normalize(this._currentDir, this._currentDir);\n      cc.math.Vec3.multiplyScalar(this._currentDir, this._currentDir, distance);\n    }\n  }, {\n    key: \"_zoomDelta\",\n    value: function _zoomDelta(delta) {\n      var currentLen = cc.math.Vec3.len(this._currentDir);\n      var len = currentLen + delta;\n\n      this._zoom(len);\n    }\n  }, {\n    key: \"_rotateHorizon\",\n    value: function _rotateHorizon(angle) {\n      var q = cc.math.Quat.fromAxisAngle(new cc.math.Quat(), cc.math.Vec3.UNIT_Y, cc.math.toRadian(angle));\n      cc.math.Vec3.transformQuat(this._currentDir, this._currentDir, q);\n    }\n  }, {\n    key: \"_rotateVertical\",\n    value: function _rotateVertical(angle) {\n      var currentDirNorm = cc.math.Vec3.normalize(new cc.math.Vec3(), this._currentDir);\n      var up = cc.math.Vec3.UNIT_Y;\n      var axis = cc.math.Vec3.cross(new cc.math.Vec3(), currentDirNorm, up);\n      cc.math.Vec3.normalize(axis, axis);\n      var currentAngle = cc.math.toDegree(cc.math.Vec3.angle(currentDirNorm, up));\n      var DISABLE_FLIP_DELTA = 1e-2;\n      var clampedAngle = currentAngle - cc.math.clamp(currentAngle - angle, 0.0 + DISABLE_FLIP_DELTA, 180.0 - DISABLE_FLIP_DELTA);\n      var q = cc.math.Quat.fromAxisAngle(new cc.math.Quat(), axis, cc.math.toRadian(clampedAngle));\n      cc.math.Vec3.transformQuat(this._currentDir, this._currentDir, q);\n    }\n  }]);\n\n  return FirstPersonCamera;\n}(cc.Component), _temp), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"initialDistance\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 1.0;\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"initialHorizonRotation\", [_dec3], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0.0;\n  }\n}), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, \"initialVerticalRotation\", [_dec4], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 45.0;\n  }\n}), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, \"horizonRotationSpeed\", [_dec5], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 1.0;\n  }\n}), _descriptor5 = _applyDecoratedDescriptor(_class2.prototype, \"verticalRotationSpeed\", [_dec6], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 1.0;\n  }\n}), _descriptor6 = _applyDecoratedDescriptor(_class2.prototype, \"mouseWheelSpeed\", [_dec7], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0.01;\n  }\n}), _descriptor7 = _applyDecoratedDescriptor(_class2.prototype, \"touchZoomSpeed\", [_dec8], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0.01;\n  }\n}), _descriptor8 = _applyDecoratedDescriptor(_class2.prototype, \"target\", [_dec9], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class2)) || _class);\n\n_cclegacy._RF.pop();","import { classCallCheck as _classCallCheck } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createClass as _createClass } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { assertThisInitialized as _assertThisInitialized } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { inherits as _inherits } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createSuper as _createSuper } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { defineProperty as _defineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\n\nvar _dec, _class, _temp;\n\nimport { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"514872+M0FEkpPvxZ4koEY6\", \"Joystick\", undefined);\n\nimport * as cc from 'cc';\nexport var Joystick = (_dec = cc._decorator.ccclass, _dec(_class = (_temp = /*#__PURE__*/function (_cc$Component) {\n  _inherits(Joystick, _cc$Component);\n\n  var _super = _createSuper(Joystick);\n\n  function Joystick() {\n    var _this;\n\n    _classCallCheck(this, Joystick);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"backgroundRadius\", 40);\n\n    _defineProperty(_assertThisInitialized(_this), \"_pressing\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"_direction\", new cc.math.Vec2());\n\n    return _this;\n  }\n\n  _createClass(Joystick, [{\n    key: \"pressing\",\n    get: function get() {\n      return this._pressing;\n    }\n  }, {\n    key: \"direction\",\n    get: function get() {\n      return this._direction;\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var uiTransform = this.getComponent(cc.UITransform);\n\n      if (!uiTransform) {\n        cc.error(\"Missing component UITransform\");\n        return;\n      }\n\n      this._uiTransform = uiTransform;\n      var bar = this.node.getChildByName('Bar');\n\n      if (!bar) {\n        cc.error(\"Missing node Bar\");\n        return;\n      }\n\n      this._bar = bar;\n      var background = this.node.getChildByName('Background');\n\n      if (!background) {\n        cc.error(\"Missing node Background\");\n        return;\n      }\n\n      this._background = background;\n      this._originalPositionBar = this._bar.getPosition(new cc.math.Vec3());\n      this._originalPositionBackground = this._background.getPosition(new cc.math.Vec3());\n      this.node.on(cc.Node.EventType.TOUCH_START, this._onThisNodeTouchStart, this);\n      this.node.on(cc.Node.EventType.TOUCH_END, this._onThisNodeTouchEnd, this);\n      this.node.on(cc.Node.EventType.TOUCH_CANCEL, this._onThisNodeTouchCancelled, this);\n      this.node.on(cc.Node.EventType.TOUCH_MOVE, this._onThisNodeTouchMove, this);\n    }\n  }, {\n    key: \"onDestroy\",\n    value: function onDestroy() {\n      this.node.off(cc.Node.EventType.TOUCH_START, this._onThisNodeTouchStart, this);\n      this.node.off(cc.Node.EventType.TOUCH_END, this._onThisNodeTouchEnd, this);\n      this.node.off(cc.Node.EventType.TOUCH_CANCEL, this._onThisNodeTouchCancelled, this);\n      this.node.off(cc.Node.EventType.TOUCH_MOVE, this._onThisNodeTouchMove, this);\n    }\n  }, {\n    key: \"update\",\n    value: function update(deltaTime) {}\n  }, {\n    key: \"_onThisNodeTouchStart\",\n    value: function _onThisNodeTouchStart(touchEvent) {\n      var touch = touchEvent.touch;\n\n      if (!touch) {\n        return;\n      }\n\n      var localPosition = this._uiTransform.convertToNodeSpaceAR(new cc.math.Vec3(touch.getUILocationX(), touch.getUILocationY(), 0.0), new cc.math.Vec3());\n\n      this._bar.setPosition(localPosition);\n\n      this._background.setPosition(localPosition);\n\n      this._pressing = true;\n    }\n  }, {\n    key: \"_onThisNodeTouchEnd\",\n    value: function _onThisNodeTouchEnd() {\n      this._bar.setPosition(this._originalPositionBar);\n\n      this._background.setPosition(this._originalPositionBackground);\n\n      this._pressing = false;\n    }\n  }, {\n    key: \"_onThisNodeTouchCancelled\",\n    value: function _onThisNodeTouchCancelled() {\n      this._onThisNodeTouchEnd();\n    }\n  }, {\n    key: \"_onThisNodeTouchMove\",\n    value: function _onThisNodeTouchMove(touchEvent) {\n      var touch = touchEvent.touch;\n\n      if (!touch) {\n        return;\n      }\n\n      var backgroundPosition = this._background.getPosition();\n\n      var delta2D = touch.getDelta();\n      var delta = new cc.math.Vec3(delta2D.x, delta2D.y);\n\n      var barPosition = this._bar.getPosition(new cc.math.Vec3());\n\n      cc.math.Vec3.add(barPosition, barPosition, delta);\n\n      var _clampCircular = clampCircular(barPosition.x, barPosition.y, backgroundPosition.x, backgroundPosition.y, this.backgroundRadius),\n          x = _clampCircular.x,\n          y = _clampCircular.y;\n\n      cc.math.Vec3.set(barPosition, x, y, barPosition.z);\n\n      this._bar.setPosition(barPosition);\n\n      var dir3D = cc.math.Vec3.subtract(new cc.math.Vec3(), barPosition, backgroundPosition);\n      cc.math.Vec3.normalize(dir3D, dir3D);\n      cc.math.Vec2.set(this._direction, dir3D.x, dir3D.y);\n      console.log(\"Move \".concat(delta));\n    }\n  }]);\n\n  return Joystick;\n}(cc.Component), _temp)) || _class);\n\nfunction clampCircular(x, y, centerX, centerY, radius) {\n  var center = new cc.math.Vec2(centerX, centerY);\n  var dir = new cc.math.Vec2(x, y);\n  cc.math.Vec2.subtract(dir, dir, center);\n  var distance = cc.math.Vec2.len(dir);\n  var clampedDistance = cc.math.clamp(distance, 0, radius);\n  cc.math.Vec2.normalize(dir, dir);\n  cc.math.Vec2.scaleAndAdd(dir, center, dir, clampedDistance);\n  return {\n    x: dir.x,\n    y: dir.y\n  };\n}\n\n_cclegacy._RF.pop();","import { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"515647kfExD1aO/WixEPOQk\", \"NodeUtils\", undefined);\n\nimport * as cc from 'cc';\nexport function getForward(node) {\n  return cc.math.Vec3.transformQuat(new cc.math.Vec3(), cc.math.Vec3.UNIT_Z, node.worldRotation);\n}\n\n_cclegacy._RF.pop();","import { initializerDefineProperty as _initializerDefineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { classCallCheck as _classCallCheck } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createClass as _createClass } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { assertThisInitialized as _assertThisInitialized } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { inherits as _inherits } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createSuper as _createSuper } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { defineProperty as _defineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { applyDecoratedDescriptor as _applyDecoratedDescriptor } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { initializerWarningHelper as _initializerWarningHelper } from \"\\0rollupPluginModLoBabelHelpers.js\";\n\nvar _dec, _dec2, _dec3, _dec4, _class, _class2, _descriptor, _descriptor2, _descriptor3, _temp;\n\nimport { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"56a76ttylZOa6v5IQHAXgVt\", \"MmoController\", undefined);\n\nimport * as cc from 'cc';\nimport { getForward } from '../Utils/NodeUtils';\nimport { Joystick } from './Joystick';\nexport var MmoController = (_dec = cc._decorator.ccclass, _dec2 = cc._decorator.property, _dec3 = cc._decorator.property, _dec4 = cc._decorator.property(Joystick), _dec(_class = (_class2 = (_temp = /*#__PURE__*/function (_cc$Component) {\n  _inherits(MmoController, _cc$Component);\n\n  var _super = _createSuper(MmoController);\n\n  function MmoController() {\n    var _this;\n\n    _classCallCheck(this, MmoController);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"moveSpeed\", _descriptor, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"rotationSpeed\", _descriptor2, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"joystick\", _descriptor3, _assertThisInitialized(_this));\n\n    _defineProperty(_assertThisInitialized(_this), \"_keyPressed\", {\n      w: false,\n      a: false,\n      s: false,\n      d: false,\n      q: false,\n      e: false\n    });\n\n    return _this;\n  }\n\n  _createClass(MmoController, [{\n    key: \"start\",\n    value: function start() {\n      cc.systemEvent.on(cc.SystemEventType.KEY_DOWN, this._onKeyDown, this);\n      cc.systemEvent.on(cc.SystemEventType.KEY_UP, this._onKeyUp, this);\n    }\n  }, {\n    key: \"onDestroy\",\n    value: function onDestroy() {\n      cc.systemEvent.off(cc.SystemEventType.KEY_DOWN, this._onKeyDown, this);\n      cc.systemEvent.off(cc.SystemEventType.TOUCH_MOVE, this._onKeyUp, this);\n    }\n  }, {\n    key: \"update\",\n    value: function update(deltaTime) {\n      var joyStick = this.joystick;\n\n      if (joyStick && joyStick.pressing) {\n        var forward = getForward(this.node);\n        var currentDir = new cc.math.Vec3(forward.x, 0.0, forward.z);\n        var joyStickDir = new cc.math.Vec3(-joyStick.direction.x, 0.0, joyStick.direction.y);\n\n        if (!cc.math.Vec3.equals(joyStickDir, cc.math.Vec3.ZERO)) {\n          var angle = cc.math.Vec3.angle(joyStickDir, currentDir);\n          var clampedAngle = cc.math.clamp(angle, 0, cc.math.toRadian(this.rotationSpeed * deltaTime));\n          var axis = cc.math.Vec3.cross(new cc.math.Vec3(), cc.math.Vec3.normalize(new cc.math.Vec3(), currentDir), joyStickDir);\n          cc.math.Vec3.normalize(axis, axis);\n          var q = cc.math.Quat.fromAxisAngle(new cc.math.Quat(), axis, clampedAngle);\n          var rotation = cc.math.Quat.multiply(q, q, this.node.rotation);\n          this.node.rotation = rotation;\n          {\n            var _position = this.node.position;\n\n            var _forward = getForward(this.node);\n\n            var newPosition = cc.math.Vec3.scaleAndAdd(new cc.math.Vec3(), _position, _forward, deltaTime * this.moveSpeed);\n            this.node.setPosition(newPosition);\n          }\n        }\n      }\n\n      var rotationQuantity = (this._keyPressed.a ? 1 : 0) + (this._keyPressed.d ? -1 : 0);\n\n      if (rotationQuantity) {\n        var rotationDelta = this.rotationSpeed * deltaTime * rotationQuantity;\n        var up = cc.math.Vec3.UNIT_Y;\n\n        var _q = cc.math.Quat.fromAxisAngle(new cc.math.Quat(), up, cc.math.toRadian(rotationDelta));\n\n        var _rotation = cc.math.Quat.multiply(_q, _q, this.node.rotation);\n\n        this.node.rotation = _rotation;\n      }\n\n      var dir = new cc.math.Vec3();\n\n      if (this._keyPressed.w) {\n        cc.math.Vec3.add(dir, dir, cc.math.Vec3.UNIT_Z);\n      }\n\n      if (this._keyPressed.s) {\n        cc.math.Vec3.add(dir, dir, NEG_UNIT_Z);\n      }\n\n      if (this._keyPressed.q) {\n        cc.math.Vec3.add(dir, dir, cc.math.Vec3.UNIT_X);\n      }\n\n      if (this._keyPressed.e) {\n        cc.math.Vec3.add(dir, dir, NEG_UNIT_X);\n      }\n\n      cc.math.Vec3.multiplyScalar(dir, dir, this.moveSpeed * deltaTime);\n      cc.math.Vec3.transformQuat(dir, dir, this.node.rotation);\n      var position = cc.math.Vec3.add(dir, this.node.position, dir);\n      this.node.position = position;\n    }\n  }, {\n    key: \"_onKeyDown\",\n    value: function _onKeyDown(event) {\n      var keyName = keyCodeToKeyName(event.keyCode);\n\n      if (!keyName) {\n        return;\n      }\n\n      if (keyName in this._keyPressed) {\n        this._keyPressed[keyName] = true;\n      }\n    }\n  }, {\n    key: \"_onKeyUp\",\n    value: function _onKeyUp(event) {\n      var keyName = keyCodeToKeyName(event.keyCode);\n\n      if (!keyName) {\n        return;\n      }\n\n      if (keyName in this._keyPressed) {\n        this._keyPressed[keyName] = false;\n      }\n    }\n  }]);\n\n  return MmoController;\n}(cc.Component), _temp), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"moveSpeed\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 1.0;\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"rotationSpeed\", [_dec3], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 180.0;\n  }\n}), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, \"joystick\", [_dec4], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n})), _class2)) || _class);\nvar NEG_UNIT_X = cc.math.Vec3.negate(new cc.math.Vec3(), cc.math.Vec3.UNIT_X);\nvar NEG_UNIT_Y = cc.math.Vec3.negate(new cc.math.Vec3(), cc.math.Vec3.UNIT_Y);\nvar NEG_UNIT_Z = cc.math.Vec3.negate(new cc.math.Vec3(), cc.math.Vec3.UNIT_Z);\n\nfunction keyCodeToKeyName(keyCode) {\n  var _MAP;\n\n  var MAP = (_MAP = {}, _defineProperty(_MAP, cc.macro.KEY.w, 'w'), _defineProperty(_MAP, cc.macro.KEY.a, 'a'), _defineProperty(_MAP, cc.macro.KEY.s, 's'), _defineProperty(_MAP, cc.macro.KEY.d, 'd'), _defineProperty(_MAP, cc.macro.KEY.q, 'q'), _defineProperty(_MAP, cc.macro.KEY.e, 'e'), _MAP);\n  return keyCode in MAP ? MAP[keyCode] : '';\n}\n\n_cclegacy._RF.pop();","import { createForOfIteratorHelper as _createForOfIteratorHelper } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { initializerDefineProperty as _initializerDefineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { classCallCheck as _classCallCheck } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createClass as _createClass } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { assertThisInitialized as _assertThisInitialized } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { inherits as _inherits } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createSuper as _createSuper } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { defineProperty as _defineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { applyDecoratedDescriptor as _applyDecoratedDescriptor } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { initializerWarningHelper as _initializerWarningHelper } from \"\\0rollupPluginModLoBabelHelpers.js\";\n\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _temp;\n\nimport { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"62f51ZcZFhNzaC+rS8q+95T\", \"MixamoAnimationRetargeting\", undefined);\n\nimport * as cc from 'cc';\nimport { SkeletonRenderer } from './SkeletonRenderer';\nimport { getLocalBindPoses, getParentJoint } from './SkeletonUtils';\nimport { SoftSkin } from './SoftSkin';\nexport var MixamoAnimationRetargeting = (_dec = cc._decorator.ccclass('MixamoAnimationRetargeting'), _dec2 = cc._decorator.property([cc.AnimationClip]), _dec3 = cc._decorator.property(cc.AnimationClip), _dec4 = cc._decorator.property, _dec5 = cc._decorator.property(cc.Skeleton), _dec6 = cc._decorator.property(cc.Skeleton), _dec(_class = (_class2 = (_temp = /*#__PURE__*/function (_cc$Component) {\n  _inherits(MixamoAnimationRetargeting, _cc$Component);\n\n  var _super = _createSuper(MixamoAnimationRetargeting);\n\n  function MixamoAnimationRetargeting() {\n    var _this;\n\n    _classCallCheck(this, MixamoAnimationRetargeting);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"clips\", _descriptor, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"defaultClip\", _descriptor2, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"rootName\", _descriptor3, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"sourceSkeleton\", _descriptor4, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"targetSkeleton\", _descriptor5, _assertThisInitialized(_this));\n\n    _defineProperty(_assertThisInitialized(_this), \"postfix\", '_Armature');\n\n    return _this;\n  }\n\n  _createClass(MixamoAnimationRetargeting, [{\n    key: \"start\",\n    value: function start() {\n      var animationComponent = this.node.getComponent(cc.AnimationComponent);\n\n      if (!animationComponent) {\n        return;\n      }\n\n      var root = this.node.getChildByPath(this.rootName);\n\n      if (!root) {\n        return;\n      }\n\n      var path = [];\n      var node = root;\n\n      while (node !== null && node !== this.node) {\n        path.unshift(node.name);\n        node = node.parent;\n      }\n\n      var prefix = path.join('/') + '/';\n      var mapping = new SkeletonMapping(prefix, this.postfix);\n\n      var _iterator = _createForOfIteratorHelper(this.clips),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var clip = _step.value;\n          retargetAnimation(clip, mapping);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      animationComponent.clips = animationComponent.clips.concat(this.clips);\n      animationComponent.defaultClip = this.defaultClip;\n      var newSkeleton = retargetJoints(this.sourceSkeleton, this.targetSkeleton, mapping);\n      newSkeleton.name = \"Retargeted skeleton\"; // const copyRenderer = copySkinnedMeshRenderer(skinnedMeshRenderer);\n      // copyRenderer.skeleton = newSkeleton;\n      // skinnedMeshRenderer.enabled = false;\n\n      var _iterator2 = _createForOfIteratorHelper(this.node.getComponentsInChildren(cc.SkinnedMeshRenderer)),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var skinnedMeshRenderer = _step2.value;\n          skinnedMeshRenderer.skeleton = newSkeleton;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      var retargetedSkeletonRenderNode = this.node.scene.getChildByName('RetargetedSkeletonDebugging');\n      var retargetedSkeletonRenderer = retargetedSkeletonRenderNode.getComponentInChildren(SkeletonRenderer); // retargetedSkeletonRenderer.skeleton = newSkeleton;\n\n      retargetedSkeletonRenderer.setRootNodesFromSkeleton(newSkeleton);\n\n      var _iterator3 = _createForOfIteratorHelper(retargetedSkeletonRenderNode.getComponentsInChildren(SoftSkin)),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var skinRenderer = _step3.value;\n          skinRenderer.skeleton = newSkeleton;\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      retargetedSkeletonRenderNode.getComponentInChildren(cc.Animation).defaultClip = this.defaultClip;\n    }\n  }]);\n\n  return MixamoAnimationRetargeting;\n}(cc.Component), _temp), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"clips\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return [];\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"defaultClip\", [_dec3], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, \"rootName\", [_dec4], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, \"sourceSkeleton\", [_dec5], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor5 = _applyDecoratedDescriptor(_class2.prototype, \"targetSkeleton\", [_dec6], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class2)) || _class);\n\nfunction retargetJoints(sourceSkeleton, targetSkeleton, mapping) {\n  var sourceLocalBindPoses = getLocalBindPoses(sourceSkeleton);\n  var sourceInverseBindPoses = sourceSkeleton.bindposes;\n  var targetLocalBindPoses = getLocalBindPoses(targetSkeleton);\n  var targetInverseBindPoses = targetSkeleton.bindposes;\n  var targetToSourceMapping = new Array(targetSkeleton.joints.length).fill(-1);\n  sourceSkeleton.joints.forEach(function (sourceJointPath, sourceJointIndex) {\n    var mappedJointPath = mapping.get(sourceJointPath);\n\n    if (!mappedJointPath) {\n      console.warn(\"Source joint \".concat(sourceJointPath, \" is not mapped.\"));\n      return;\n    }\n\n    var targetJointIndex = targetSkeleton.joints.indexOf(mappedJointPath);\n\n    if (!targetJointIndex) {\n      console.warn(\"Source joint \".concat(sourceJointPath, \" is not mapped into target skeleton.\"));\n      return;\n    }\n\n    targetToSourceMapping[targetJointIndex] = sourceJointIndex;\n  });\n  var nonMappedTargetJoints = targetToSourceMapping.map(function (_, index) {\n    return index;\n  }).filter(function (index) {\n    return targetToSourceMapping[index] < 0;\n  });\n\n  if (nonMappedTargetJoints.length !== 0) {\n    console.warn(\"The following joints in target skeleton are not mapped:\\n\" + \"\".concat(nonMappedTargetJoints.map(function (index) {\n      return targetSkeleton.joints[index].split('/').pop();\n    }).join('\\n')));\n  }\n\n  var newBindPoseMatrices = Array.from({\n    length: targetSkeleton.joints.length\n  }, function () {\n    return new cc.math.Mat4();\n  });\n\n  for (var iTargetJoint = 0; iTargetJoint < targetSkeleton.joints.length; ++iTargetJoint) {\n    var targetJointIndex = iTargetJoint;\n    var sourceJointIndex = targetToSourceMapping[iTargetJoint];\n\n    if (sourceJointIndex < 0) {\n      continue;\n    }\n\n    var newBindPoseLocal = newBindPoseMatrices[targetJointIndex];\n    var sourceLocalBindPose = sourceLocalBindPoses[sourceJointIndex];\n    var sourceInverseBindPose = sourceInverseBindPoses[sourceJointIndex];\n    var sourceLocalInverseBindPose = cc.math.Mat4.invert(new cc.math.Mat4(), sourceInverseBindPose);\n    var targetLocalBindPose = targetLocalBindPoses[targetJointIndex];\n    var targetLocalInverseBindPose = cc.math.Mat4.invert(new cc.math.Mat4(), targetLocalBindPose);\n    var targetInverseBindPose = targetInverseBindPoses[targetJointIndex];\n    var sourceLocalRotation = sourceLocalBindPose.getRotation(new cc.math.Quat());\n    var sourceLocalScale = sourceLocalBindPose.getScale(new cc.math.Vec3());\n    var sourceLocalTranslation = sourceLocalBindPose.getTranslation(new cc.math.Vec3());\n    var targetLocalTranslation = targetLocalBindPose.getTranslation(new cc.math.Vec3()); // Enter source joint space\n\n    cc.math.Mat4.multiply(newBindPoseLocal, newBindPoseLocal, sourceLocalBindPose); // Cancel target joint space\n\n    cc.math.Mat4.multiply(newBindPoseLocal, newBindPoseLocal, targetLocalInverseBindPose); // Mesh space -> Target joint space\n\n    cc.math.Mat4.multiply(newBindPoseLocal, newBindPoseLocal, targetInverseBindPose); //const targetJointParentIndex = getParentJoint(targetSkeleton, targetJointIndex);\n    // const retargetedTranslation = cc.math.Vec3.clone(targetLocalTranslation);\n    // const retargetedRotation = sourceLocalRotation;\n    // const retargetedScale = sourceLocalScale;\n    // cc.math.Vec3.multiplyScalar(retargetedTranslation, retargetedTranslation, 0.001);\n    // cc.math.Vec3.multiply(retargetedTranslation, retargetedTranslation, sourceLocalScale);\n    // const retargetedLocalBindPose = cc.math.Mat4.fromRTS(new cc.math.Mat4(), retargetedRotation, retargetedTranslation, retargetedScale);\n    // cc.math.Mat4.copy(newBindPoseLocal, retargetedLocalBindPose);\n    // cc.math.Mat4.multiply(newBindPoseLocal, newBindPoseLocal, targetInverseBindPose);\n    // Verify we get no problem with local-world bind pose transformation\n    // cc.math.Mat4.copy(newBindPoseLocal, targetLocalBindPose);\n    // cc.math.Mat4.copy(newBindPoseLocal, targetLocalBindPose);\n  } // localBindPosesToWorld(targetSkeleton, newBindPoseMatrices);\n  // for (const bindPose of newBindPoseMatrices) {\n  //     cc.math.Mat4.invert(bindPose, bindPose);\n  // }\n\n\n  var newSkeleton = new cc.Skeleton();\n  newSkeleton.joints = targetSkeleton.joints.slice();\n  newSkeleton.bindposes = newBindPoseMatrices;\n  return newSkeleton;\n}\n\nfunction getLocalInverseBindPoses(skeleton) {\n  var sourceJointsTransforms = Array.from({\n    length: skeleton.joints.length\n  }, function (_, index) {\n    var parentJointIndex = getParentJoint(skeleton, index);\n    var bindPose = skeleton.bindposes[index];\n    var localBindPose = new cc.math.Mat4();\n\n    if (parentJointIndex < 0) {\n      cc.math.Mat4.copy(localBindPose, bindPose);\n    } else {\n      cc.math.Mat4.multiply(localBindPose, skeleton.inverseBindposes[parentJointIndex], bindPose);\n    }\n\n    return localBindPose;\n  });\n  return sourceJointsTransforms;\n}\n\nfunction localBindPosesToWorld(skeleton, localBindPoses) {\n  var childrenTable = skeleton.joints.map(function () {\n    return {\n      parent: -1,\n      children: []\n    };\n  });\n\n  for (var iTargetJoint = 0; iTargetJoint < skeleton.joints.length; ++iTargetJoint) {\n    var parentJointIndex = getParentJoint(skeleton, iTargetJoint);\n\n    if (parentJointIndex >= 0) {\n      childrenTable[iTargetJoint].parent = parentJointIndex;\n      childrenTable[parentJointIndex].children.push(iTargetJoint);\n    }\n  }\n\n  childrenTable.forEach(function (_ref, index) {\n    var children = _ref.children,\n        parent = _ref.parent;\n\n    if (parent >= 0) {\n      return;\n    }\n\n    calc(index);\n\n    function calc(index) {\n      var my = localBindPoses[index];\n\n      var _iterator4 = _createForOfIteratorHelper(childrenTable[index].children),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var child = _step4.value;\n          cc.math.Mat4.multiply(localBindPoses[child], my, localBindPoses[child]);\n          calc(child);\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n    }\n  });\n}\n\nfunction retargetAnimation(clip, mapping) {\n  var _iterator5 = _createForOfIteratorHelper(clip.tracks),\n      _step5;\n\n  try {\n    for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n      var track = _step5.value;\n      var path = track.path;\n\n      if (path.length === 0) {\n        continue;\n      }\n\n      var hierarchyPath = path[0];\n\n      if (!(hierarchyPath instanceof cc.animation.HierarchyPath)) {\n        continue;\n      }\n\n      var mapped = mapping.get(hierarchyPath.path);\n\n      if (mapped) {\n        hierarchyPath.path = mapped;\n      }\n    }\n  } catch (err) {\n    _iterator5.e(err);\n  } finally {\n    _iterator5.f();\n  }\n}\n\nvar SkeletonMapping = /*#__PURE__*/function () {\n  function SkeletonMapping(prefix, postfix) {\n    _classCallCheck(this, SkeletonMapping);\n\n    _defineProperty(this, \"_prefix\", void 0);\n\n    _defineProperty(this, \"_postfix\", void 0);\n\n    this._prefix = prefix;\n    this._postfix = postfix;\n  }\n\n  _createClass(SkeletonMapping, [{\n    key: \"get\",\n    value: function get(source) {\n      var prefix = this._prefix,\n          postfix = this._postfix;\n      var mapped = \"\".concat(prefix).concat(source.split('/').map(function (s) {\n        return \"\".concat(s).concat(postfix);\n      }).join('/'));\n      return mapped;\n    }\n  }]);\n\n  return SkeletonMapping;\n}();\n\nfunction copySkinnedMeshRenderer(skinnedMeshRenderer) {\n  var node = skinnedMeshRenderer.node;\n  var newRenderer = node.addComponent(cc.SkinnedMeshRenderer);\n  newRenderer.mesh = skinnedMeshRenderer.mesh; // newRenderer.sharedMaterials = skinnedMeshRenderer.sharedMaterials;\n\n  newRenderer.skinningRoot = skinnedMeshRenderer.skinningRoot;\n  newRenderer.skeleton = skinnedMeshRenderer.skeleton;\n  return newRenderer;\n}\n\n_cclegacy._RF.pop();","import { initializerDefineProperty as _initializerDefineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { classCallCheck as _classCallCheck } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createClass as _createClass } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { assertThisInitialized as _assertThisInitialized } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { inherits as _inherits } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createSuper as _createSuper } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { defineProperty as _defineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { applyDecoratedDescriptor as _applyDecoratedDescriptor } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { initializerWarningHelper as _initializerWarningHelper } from \"\\0rollupPluginModLoBabelHelpers.js\";\n\nvar _dec, _dec2, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _temp;\n\nimport { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"65e46jJEo9C+r7M4LECzFMl\", \"ThirdPersonCamera\", undefined);\n\nimport { _decorator, Component, game, macro, math, systemEvent, SystemEvent } from 'cc';\nvar ccclass = _decorator.ccclass,\n    property = _decorator.property;\nvar Vec2 = math.Vec2,\n    Vec3 = math.Vec3,\n    Quat = math.Quat;\nvar v2_1 = new Vec2();\nvar v2_2 = new Vec2();\nvar v3_1 = new Vec3();\nvar qt_1 = new Quat();\nvar KEYCODE = {\n  W: 'W'.charCodeAt(0),\n  S: 'S'.charCodeAt(0),\n  A: 'A'.charCodeAt(0),\n  D: 'D'.charCodeAt(0),\n  Q: 'Q'.charCodeAt(0),\n  E: 'E'.charCodeAt(0),\n  SHIFT: macro.KEY.shift\n};\nexport var ThirdPersonCamera = (_dec = ccclass('ThirdPersonCamera'), _dec2 = property({\n  slide: true,\n  range: [0.05, 0.5, 0.01]\n}), _dec(_class = (_class2 = (_temp = /*#__PURE__*/function (_Component) {\n  _inherits(ThirdPersonCamera, _Component);\n\n  var _super = _createSuper(ThirdPersonCamera);\n\n  function ThirdPersonCamera() {\n    var _this;\n\n    _classCallCheck(this, ThirdPersonCamera);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"moveSpeed\", _descriptor, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"moveSpeedShiftScale\", _descriptor2, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"damp\", _descriptor3, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"rotateSpeed\", _descriptor4, _assertThisInitialized(_this));\n\n    _defineProperty(_assertThisInitialized(_this), \"_euler\", new Vec3());\n\n    _defineProperty(_assertThisInitialized(_this), \"_velocity\", new Vec3());\n\n    _defineProperty(_assertThisInitialized(_this), \"_position\", new Vec3());\n\n    _defineProperty(_assertThisInitialized(_this), \"_speedScale\", 1);\n\n    return _this;\n  }\n\n  _createClass(ThirdPersonCamera, [{\n    key: \"onLoad\",\n    value: function onLoad() {\n      systemEvent.on(SystemEvent.EventType.MOUSE_WHEEL, this.onMouseWheel, this);\n      systemEvent.on(SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n      systemEvent.on(SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\n      systemEvent.on(SystemEvent.EventType.TOUCH_START, this.onTouchStart, this);\n      systemEvent.on(SystemEvent.EventType.TOUCH_MOVE, this.onTouchMove, this);\n      systemEvent.on(SystemEvent.EventType.TOUCH_END, this.onTouchEnd, this);\n      Vec3.copy(this._euler, this.node.eulerAngles);\n      Vec3.copy(this._position, this.node.position);\n    }\n  }, {\n    key: \"onDestroy\",\n    value: function onDestroy() {\n      systemEvent.off(SystemEvent.EventType.MOUSE_WHEEL, this.onMouseWheel, this);\n      systemEvent.off(SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n      systemEvent.off(SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\n      systemEvent.off(SystemEvent.EventType.TOUCH_START, this.onTouchStart, this);\n      systemEvent.off(SystemEvent.EventType.TOUCH_MOVE, this.onTouchMove, this);\n      systemEvent.off(SystemEvent.EventType.TOUCH_END, this.onTouchEnd, this);\n    }\n  }, {\n    key: \"update\",\n    value: function update(dt) {\n      // position\n      Vec3.transformQuat(v3_1, this._velocity, this.node.rotation);\n      Vec3.scaleAndAdd(this._position, this._position, v3_1, this.moveSpeed * this._speedScale);\n      Vec3.lerp(v3_1, this.node.position, this._position, dt / this.damp);\n      this.node.setPosition(v3_1); // rotation\n\n      Quat.fromEuler(qt_1, this._euler.x, this._euler.y, this._euler.z);\n      Quat.slerp(qt_1, this.node.rotation, qt_1, dt / this.damp);\n      this.node.setRotation(qt_1);\n    }\n  }, {\n    key: \"onMouseWheel\",\n    value: function onMouseWheel(e) {\n      var delta = -e.getScrollY() * this.moveSpeed * 0.1; // delta is positive when scroll down\n\n      Vec3.transformQuat(v3_1, Vec3.UNIT_Z, this.node.rotation);\n      Vec3.scaleAndAdd(this._position, this.node.position, v3_1, delta);\n    }\n  }, {\n    key: \"onKeyDown\",\n    value: function onKeyDown(e) {\n      var v = this._velocity;\n\n      if (e.keyCode === KEYCODE.SHIFT) {\n        this._speedScale = this.moveSpeedShiftScale;\n      } else if (e.keyCode === KEYCODE.W) {\n        if (v.z === 0) {\n          v.z = -1;\n        }\n      } else if (e.keyCode === KEYCODE.S) {\n        if (v.z === 0) {\n          v.z = 1;\n        }\n      } else if (e.keyCode === KEYCODE.A) {\n        if (v.x === 0) {\n          v.x = -1;\n        }\n      } else if (e.keyCode === KEYCODE.D) {\n        if (v.x === 0) {\n          v.x = 1;\n        }\n      } else if (e.keyCode === KEYCODE.Q) {\n        if (v.y === 0) {\n          v.y = -1;\n        }\n      } else if (e.keyCode === KEYCODE.E) {\n        if (v.y === 0) {\n          v.y = 1;\n        }\n      }\n    }\n  }, {\n    key: \"onKeyUp\",\n    value: function onKeyUp(e) {\n      var v = this._velocity;\n\n      if (e.keyCode === KEYCODE.SHIFT) {\n        this._speedScale = 1;\n      } else if (e.keyCode === KEYCODE.W) {\n        if (v.z < 0) {\n          v.z = 0;\n        }\n      } else if (e.keyCode === KEYCODE.S) {\n        if (v.z > 0) {\n          v.z = 0;\n        }\n      } else if (e.keyCode === KEYCODE.A) {\n        if (v.x < 0) {\n          v.x = 0;\n        }\n      } else if (e.keyCode === KEYCODE.D) {\n        if (v.x > 0) {\n          v.x = 0;\n        }\n      } else if (e.keyCode === KEYCODE.Q) {\n        if (v.y < 0) {\n          v.y = 0;\n        }\n      } else if (e.keyCode === KEYCODE.E) {\n        if (v.y > 0) {\n          v.y = 0;\n        }\n      }\n    }\n  }, {\n    key: \"onTouchStart\",\n    value: function onTouchStart() {\n      if (game.canvas['requestPointerLock']) {\n        game.canvas.requestPointerLock();\n      }\n    }\n  }, {\n    key: \"onTouchMove\",\n    value: function onTouchMove(t, e) {\n      e.getStartLocation(v2_1);\n\n      if (v2_1.x > game.canvas.width * 0.4) {\n        // rotation\n        e.getDelta(v2_2);\n        this._euler.y -= v2_2.x * this.rotateSpeed * 0.1;\n        this._euler.x += v2_2.y * this.rotateSpeed * 0.1;\n      } else {\n        // position\n        e.getLocation(v2_2);\n        Vec2.subtract(v2_2, v2_2, v2_1);\n        this._velocity.x = v2_2.x * 0.01;\n        this._velocity.z = -v2_2.y * 0.01;\n      }\n    }\n  }, {\n    key: \"onTouchEnd\",\n    value: function onTouchEnd(t, e) {\n      if (document.exitPointerLock) {\n        document.exitPointerLock();\n      }\n\n      e.getStartLocation(v2_1);\n\n      if (v2_1.x < game.canvas.width * 0.4) {\n        // position\n        this._velocity.x = 0;\n        this._velocity.z = 0;\n      }\n    }\n  }]);\n\n  return ThirdPersonCamera;\n}(Component), _temp), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"moveSpeed\", [property], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0.01;\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"moveSpeedShiftScale\", [property], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 5;\n  }\n}), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, \"damp\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0.2;\n  }\n}), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, \"rotateSpeed\", [property], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 1;\n  }\n})), _class2)) || _class);\n\n_cclegacy._RF.pop();","import { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"6dbb8TXuw9L7alFZSzNwebU\", \"GeometryUtils\", undefined);\n\nimport { Vec3 } from \"cc\";\nexport var calculateNormals = function () {\n  var p0 = new Vec3();\n  var p1 = new Vec3();\n  var p2 = new Vec3();\n  var e1 = new Vec3();\n  var e2 = new Vec3();\n  var n = new Vec3();\n  return function (positions, indices) {\n    var out = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    var nFaces = indices.length / 3;\n    var nVertices = positions.length / 3;\n    var normals = Array(3 * nVertices).fill(0).map(function () {\n      return new Vec3();\n    });\n\n    for (var iFace = 0; iFace < nFaces; ++iFace) {\n      var i0 = indices[3 * iFace + 0];\n      var i1 = indices[3 * iFace + 1];\n      var i2 = indices[3 * iFace + 2];\n      Vec3.fromArray(p0, positions, i0 * 3);\n      Vec3.fromArray(p1, positions, i1 * 3);\n      Vec3.fromArray(p2, positions, i2 * 3);\n      Vec3.subtract(e1, p1, p0);\n      Vec3.subtract(e2, p2, p0);\n      Vec3.cross(n, e1, e2);\n      Vec3.add(normals[i0], normals[i0], n);\n      Vec3.add(normals[i1], normals[i1], n);\n      Vec3.add(normals[i2], normals[i2], n);\n    }\n\n    for (var iVertex = 0; iVertex < nVertices; ++iVertex) {\n      Vec3.toArray(out, Vec3.normalize(n, normals[iVertex]), iVertex * 3);\n    }\n\n    return out;\n  };\n}();\n\n_cclegacy._RF.pop();","import { classCallCheck as _classCallCheck } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createClass as _createClass } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { inherits as _inherits } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createSuper as _createSuper } from \"\\0rollupPluginModLoBabelHelpers.js\";\n\nvar _dec, _class;\n\nimport { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"bfd37AsoRpEcJP+YaZkWVse\", \"UIContentSizeOutline\", undefined);\n\nimport * as cc from 'cc';\nexport var UIContentSizeOutline = (_dec = cc._decorator.ccclass, _dec(_class = /*#__PURE__*/function (_cc$Component) {\n  _inherits(UIContentSizeOutline, _cc$Component);\n\n  var _super = _createSuper(UIContentSizeOutline);\n\n  function UIContentSizeOutline() {\n    _classCallCheck(this, UIContentSizeOutline);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(UIContentSizeOutline, [{\n    key: \"start\",\n    value: function start() {// this._graphics = this.node.addComponent(cc.Graphics);\n    }\n  }, {\n    key: \"update\",\n    value: function update() {// this._graphics.clear();\n      // const uiTransform = this.node.getComponent(cc.UITransform);\n      // if (!uiTransform) {\n      //     return;\n      // }\n      // const { _graphics: graphics } = this;\n      // const { contentSize } = uiTransform;\n      // graphics.moveTo(0.0, 0.0);\n      // graphics.lineTo(0.0, contentSize.y);\n      // graphics.lineTo(contentSize.x, contentSize.y);\n      // graphics.lineTo(contentSize.y, contentSize.x);\n      // graphics.close();\n      // graphics.stroke();\n      // graphics.fill();\n    }\n  }]);\n\n  return UIContentSizeOutline;\n}(cc.Component)) || _class);\n\n_cclegacy._RF.pop();","import { initializerDefineProperty as _initializerDefineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { classCallCheck as _classCallCheck } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createClass as _createClass } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { assertThisInitialized as _assertThisInitialized } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { inherits as _inherits } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createSuper as _createSuper } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { defineProperty as _defineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { applyDecoratedDescriptor as _applyDecoratedDescriptor } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { initializerWarningHelper as _initializerWarningHelper } from \"\\0rollupPluginModLoBabelHelpers.js\";\n\nvar _dec, _dec2, _dec3, _dec4, _class, _class2, _descriptor, _descriptor2, _descriptor3, _temp;\n\nimport { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"f25b2gP6A9LOLBkrBvi3Lzf\", \"BillboardUi\", undefined);\n\nimport * as cc from 'cc';\nexport var BillboardUi = (_dec = cc._decorator.ccclass, _dec2 = cc._decorator.property(cc.Node), _dec3 = cc._decorator.property(cc.Camera), _dec4 = cc._decorator.property, _dec(_class = (_class2 = (_temp = /*#__PURE__*/function (_cc$Component) {\n  _inherits(BillboardUi, _cc$Component);\n\n  var _super = _createSuper(BillboardUi);\n\n  function BillboardUi() {\n    var _this;\n\n    _classCallCheck(this, BillboardUi);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"target\", _descriptor, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"camera\", _descriptor2, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"distance\", _descriptor3, _assertThisInitialized(_this));\n\n    _defineProperty(_assertThisInitialized(_this), \"_lastTargetPosition\", new cc.math.Vec3());\n\n    return _this;\n  }\n\n  _createClass(BillboardUi, [{\n    key: \"start\",\n    value: function start() {\n      var targetPosition = this.target.worldPosition;\n      cc.math.Vec3.copy(this._lastTargetPosition, targetPosition);\n\n      this._updatePosition(targetPosition);\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var target = this.target,\n          lastTargetPosition = this._lastTargetPosition;\n      var targetPosition = target.worldPosition;\n\n      if (cc.Vec3.equals(targetPosition, lastTargetPosition)) {\n        return;\n      }\n\n      cc.math.Vec3.copy(lastTargetPosition, targetPosition);\n\n      this._updatePosition(targetPosition);\n    }\n  }, {\n    key: \"_updatePosition\",\n    value: function _updatePosition(targetPosition) {\n      var camera = this.camera;\n      camera.camera.update();\n      var uiPosition = camera.convertToUINode(targetPosition, this.node.parent, new cc.math.Vec3());\n      this.node.setPosition(uiPosition); // cc.math.Vec3.transformMat4(uiPosition, targetPosition, camera.camera.matView);\n      // const ratio = this.distance / Math.abs(uiPosition.z);\n      // const value = Math.floor(ratio * 100) / 100;\n      // this.node.setScale(value, value, 1.0);\n    }\n  }]);\n\n  return BillboardUi;\n}(cc.Component), _temp), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"target\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"camera\", [_dec3], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, \"distance\", [_dec4], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0.0;\n  }\n})), _class2)) || _class);\n\n_cclegacy._RF.pop();","import { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"f6139Hm3xpBtbgZ0wBNu50o\", \"SkeletonUtils\", undefined);\n\nimport * as cc from 'cc';\nexport function skeletonToNodes(skeleton) {\n  var localBindPoses = getLocalBindPoses(skeleton);\n  var nodes = skeleton.joints.map(function (path, index) {\n    var node = new cc.Node(path.split('/').pop());\n    var position = new cc.math.Vec3();\n    var scale = new cc.math.Vec3();\n    var rotation = new cc.math.Quat();\n    cc.math.Mat4.toRTS(localBindPoses[index], rotation, position, scale);\n    node.setRTS(rotation, position, scale);\n    return node;\n  });\n  var rootNodes = [];\n\n  for (var iTargetJoint = 0; iTargetJoint < skeleton.joints.length; ++iTargetJoint) {\n    var parentJointIndex = getParentJoint(skeleton, iTargetJoint);\n\n    if (parentJointIndex >= 0) {\n      nodes[parentJointIndex].addChild(nodes[iTargetJoint]);\n    } else {\n      rootNodes.push(nodes[iTargetJoint]);\n    }\n  }\n\n  return rootNodes;\n}\nexport function getLocalBindPoses(skeleton) {\n  var sourceJointsTransforms = Array.from({\n    length: skeleton.joints.length\n  }, function (_, index) {\n    var parentJointIndex = getParentJoint(skeleton, index);\n    var bindPose = skeleton.inverseBindposes[index];\n    var localBindPose = new cc.math.Mat4();\n\n    if (parentJointIndex < 0) {\n      cc.math.Mat4.copy(localBindPose, bindPose);\n    } else {\n      cc.math.Mat4.multiply(localBindPose, skeleton.bindposes[parentJointIndex], bindPose);\n    }\n\n    return localBindPose;\n  });\n  return sourceJointsTransforms;\n}\nexport function getParentJoint(skeleton, jointIndex) {\n  var jointPath = skeleton.joints[jointIndex];\n  var segments = jointPath.split('/');\n  var parentJointPath = segments.length === 1 ? '' : segments.slice(0, segments.length - 1).join('/');\n  var parentJointIndex = !parentJointPath ? -1 : skeleton.joints.indexOf(parentJointPath);\n  return parentJointIndex;\n}\n\n_cclegacy._RF.pop();","import { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"f9b9dUPAYBNMo/j5reSMvUI\", \"OctahedralBone\", undefined);\n\nimport { Mat4, Quat } from 'cc';\nimport { gfx, Vec3 } from 'cc';\nimport { calculateNormals } from './GeometryUtils';\n/**\n * Create an octahedral geometry which usually represents a bone.\n * The octahedral is constituted of two rectangular pyramids, both share the same polygonal base.\n * The height of the octahedral is 1.0.\n * @returns The geometry.\n */\n\nexport function createOctahedralBone(_ref) {\n  var location = _ref.location,\n      width = _ref.width,\n      length = _ref.length,\n      _ref$ratio = _ref.ratio,\n      ratio = _ref$ratio === void 0 ? 0.2 : _ref$ratio;\n  var halfWeight = width / 2.0;\n  var halfLength = length / 2.0;\n  var positions = [0.0, 0.0, 0.0, // lowerApex\n  0.0, 1.0, 0.0, // upperApex\n  halfWeight, ratio, halfLength, // v0\n  -halfWeight, ratio, halfLength, // v1\n  -halfWeight, ratio, -halfLength, // v2\n  halfWeight, ratio, -halfLength // v3\n  ];\n\n  if (location) {\n    var dir = Vec3.subtract(new Vec3(), location.upper, location.lower);\n    var dirLen = Vec3.len(dir);\n    Vec3.normalize(dir, dir);\n    var rot = Quat.rotationTo(new Quat(), Vec3.UNIT_Y, dir);\n    var transform = Mat4.fromRTS(new Mat4(), rot, location.lower, new Vec3(dirLen, dirLen, dirLen));\n\n    for (var i = 0; i < positions.length / 3; ++i) {\n      var p = Vec3.fromArray(new Vec3(), positions, 3 * i);\n      Vec3.transformMat4(p, p, transform);\n      Vec3.toArray(positions, p, 3 * i);\n    }\n  }\n\n  var lowerApex = 0;\n  var upperApex = 1;\n  var v0 = 2;\n  var v1 = 3;\n  var v2 = 4;\n  var v3 = 5;\n  var faceVertices = [v0, v1, lowerApex, v1, v2, lowerApex, v2, v3, lowerApex, v3, v0, lowerApex, upperApex, v1, v0, upperApex, v2, v1, upperApex, v3, v2, upperApex, v0, v3];\n  var nFaceVertices = faceVertices.length;\n  var vertices = new Array(3 * nFaceVertices).fill(0.0);\n\n  for (var iFaceVertex = 0; iFaceVertex < nFaceVertices; ++iFaceVertex) {\n    var positionIndex = faceVertices[iFaceVertex];\n    vertices[3 * iFaceVertex] = positions[3 * positionIndex];\n    vertices[3 * iFaceVertex + 1] = positions[3 * positionIndex + 1];\n    vertices[3 * iFaceVertex + 2] = positions[3 * positionIndex + 2];\n  }\n\n  var normals = calculateNormals(vertices, Array.from({\n    length: nFaceVertices\n  }, function (_, i) {\n    return i;\n  }), new Array(vertices.length).fill(0.0));\n  return {\n    primitiveMode: gfx.PrimitiveMode.TRIANGLE_LIST,\n    positions: vertices,\n    normals: normals\n  };\n}\n\n_cclegacy._RF.pop();"]}